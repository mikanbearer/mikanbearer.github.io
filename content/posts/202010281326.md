---
title: "Hugo輸出JSON的問題"
date: 2020-10-28T13:26:11+08:00
draft: false
categories: [未分類]
tags: [Hugo]
isCJKLanguage: true
---
月初將BLOG部分作成SPA時發現的問題

<!--more-->
Hugo在輸出JSON的時候會偶發性的不照template order生成，
  
這裡有人遇到跟一樣的問題[https://discourse.gohugo.io/t/json-output-uses-the-wrong-template/27284/10](https://discourse.gohugo.io/t/json-output-uses-the-wrong-template/27284/10)
  
依照規則，template會依照<type>/<kind>.<format>.<extension>的規則輸出，以json為例
```
content/posts/qq.md
```
<br></br>
template就應該會是這個
```
layout/posts/single.json.json
```
<br></br>
但實際上可能會吃到其他的template，如
```
layout/works/single.json.json
```
<br></br>
最後的解決方法是全寫進default，每個kind只使用一個template，畢竟type並不可靠，大概會像這樣
```:layout/_default/single.json {hl_lines=[2]}
{{ define "result" }}
    {{ if (in site.Params.mainSections .Type) }}
        {{ dict "kind" .Kind "type" .Type "wordcount" .WordCount "content" .Content "permalink" .Permalink "params" .Params | jsonify (dict "indent" "  ") }}
    {{ end }}
{{ end }}
```
在template內判斷type