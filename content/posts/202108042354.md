---
title: "在打包環境下使用ECharts的筆記"
date: 2021-08-04T23:54:30+08:00
categories: [Web Development]
tags: [JavaScript, ECharts, rollup.js]
isCJKLanguage: true
---
一些小筆記和遇到的錯誤
<!--more-->

* <a onclick="window.scrollTo({top: document.getElementById(1).offsetTop, behavior: 'smooth'})">安裝與使用</a>
* <a onclick="window.scrollTo({top: document.getElementById(2).offsetTop, behavior: 'smooth'})">遇到的錯誤</a>

<br></br>
<h3 id="1">安裝與使用</h3>

---
<br></br>
首先是安裝，這裡的套件管理工具用的是npm
```
npm install echarts --save
```
<br></br>
可一次import全部，但是build比較久檔案也大
```js
import * as echarts from 'echarts';
```
<br></br>

或是依照需求import
```js
import * as echarts from 'echarts/core';
import { BarChart, LineChart, PieChart } from 'echarts/charts';
import { TitleComponent, TooltipComponent, GridComponent, LegendComponent } from 'echarts/components';
import { CanvasRenderer } from 'echarts/renderers';

// 需要註冊才可以使用
echarts.use(
    [TitleComponent, TooltipComponent, GridComponent, LegendComponent, BarChart, PieChart, LineChart, CanvasRenderer]
);

```
<br></br>


<h3 id="2">遇到的錯誤</h3>

---
<br></br>
接下來是遇到錯誤

* rollup：
在rollup開發環境下遇到的狀況，

![](1.png)
<br></br>

原因在於NODE_ENV是undefiend

![](2.png)
<br></br>

可以使用rollup-plugin-replace解決
```
npm install rollup-plugin-replace --save-dev 
```
<br></br>

config修改範例
```:rollup.config.js
import replace from 'rollup-plugin-replace';

export default {
    ...

	plugins: [
        ...
		replace({
			'process.env.NODE_ENV': JSON.stringify(process.env.NODE_ENV || 'development')
		})
	],
```
<br></br>

webpack應該也有一樣的狀況，之後要用到會再補