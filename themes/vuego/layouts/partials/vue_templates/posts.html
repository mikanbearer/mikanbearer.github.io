<script type="text/x-template" id="posts">

    <div>
        
        <v-slide-x-transition>
            <v-row v-show="displayPosts.length" class="post-list">
                <v-col v-for="(post, index) in displayPosts" :key="index" cols="12" xs="12" sm="6" md="6" lg="4" xl="3">
                
                    <v-card class="content">
                        <v-list-item three-line>
                            <v-list-item-content>
                            
                                <div class="overline">
                                    <div class="post-subtitle grey--text">
                                        <v-icon small color="grey lighten-1">
                                            mdi-calendar
                                        </v-icon>
                                        [[ post.date.slice(0,10) ]]
                                        <v-divider vertical></v-divider>
                                        <v-icon small color="grey lighten-1">
                                            mdi-folder-multiple
                                        </v-icon>
                                        <div v-for="(category, index) in post.categories" class="d-inline">
                                            <span v-if="index">, </span>
                                            <router-link
                                                :to="{path: '/', query: {category: category}}"
                                            >
                                                [[ category ]]
                                            </router-link>
                                        </div>
                                    </div>
                                </div>
                            
                                <v-list-item-title class="text-h6 grey--text text--lighten-2">
                                    <router-link 
                                        class="post-title" 
                                        v-html="post.title" 
                                        :to="{path: 'post', query: {url: post.url}}"
                                    >
                                    </router-link>
                                
                                </v-list-item-title>
                            
                                <v-list-item-subtitle>
                                    <div class="mt-2 text-body-2 grey--text text--lighten-1">
                                    
                                        <div class="post-subtitle">
                                            <v-icon small color="grey lighten-1">
                                                mdi-tag-multiple
                                            </v-icon>
                                            <div v-for="tag in post.tags" class="d-inline">
                                                <v-chip
                                                    color="accent"
                                                    label
                                                    text-color="grey lighten-3"
                                                    x-small
                                                    class="mr-1"
                                                    :key="tag"
                                                    :to="{path: '/', query: {tag: tag}}"
                                                    v-if="searchConditions.selectedTags.includes(tag)"
                                                    :class="['v-chip--active']"
                                                >
                                                    [[ tag ]]
                                                </v-chip>
                                                <v-chip
                                                    color="accent"
                                                    label
                                                    text-color="grey lighten-3"
                                                    x-small
                                                    class="mr-1"
                                                    :key="tag"
                                                    :to="{path: '/', query: {tag: tag}}"
                                                    v-else
                                                >
                                                    [[ tag ]]
                                                </v-chip>
                                            </div>
                                        </div>
                                        
                                    </div>                      
                                </v-list-item-subtitle>
                            </v-list-item-content>
                        </v-list-item>
                    
                        <v-divider inset></v-divider>
                        
                        <v-card-text class="text-body-2 grey--text text--lighten-2">
                            <div class="post-content" v-html="post.summary"></div>

                            <v-row justify="end">

                                <v-tooltip bottom>
                                    <template v-slot:activator="{ on, attrs }">
                                        <div
                                            v-bind="attrs"
                                            v-on="on"
                                        >
                                            <v-btn :to="{path: 'post', query: {url: post.url}}" color="primary" small text>
                                                Continue Reading
                                                <v-icon right small>
                                                    mdi-chevron-right
                                                </v-icon>
                                            </v-btn>
                                        </div>
                                    </template>
                                    <span>[[ post.wordcount ]] words</span>
                                </v-tooltip> 
                            </v-row>
                        </v-card-text>

                    </v-card>
                </v-col>
            </v-row>
        </v-slide-x-transition>
        <v-pagination v-if="displayPosts.length" v-model="page" :length=pageLength @input="pageChange" class="mt-4"></v-pagination>

        <v-snackbar
            v-model="resultSnackbar"
            :timeout=2000
        >
            Found [[ filteredPosts.length ]] Posts.
            <template v-slot:action="{ attrs }">
                <v-btn
                    color="primary"
                    icon
                    v-bind="attrs"
                    @click="resultSnackbar = false"
                >
                    <v-icon>
                        mdi-close
                    </v-icon>
                </v-btn>
            </template>
        </v-snackbar>
    </div>

</script>