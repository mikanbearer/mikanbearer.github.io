<script type="text/x-template" id="posts">

    <div>
        <v-slide-x-transition>
            <div class="post-list" v-show="displayPosts.length">

                <v-card class="content mb-5" v-for="(post, index) in displayPosts" :key="index">
                    <v-card-title class="text-h6 grey--text text--lighten-4 justify-space-between" style="background-color: #556265;">
                        <div class="post-title">
                            [[ post.title ]]
                        </div>
                    </v-card-title>
                    <v-card-subtitle class="text-body-1 grey--text text--lighten-2 mt-1">
                        <div class="post-subtitle">
                            [[ post.date ]]
                            <router-link
                                v-for="category in post.categories"
                                :key="category"
                                :to="{path: '/', query: {category: category}}"
                            >
                                [[ category ]]
                            </router-link>
                        </div>
                        <div>
                            <v-icon small color="grey lighten-2">
                                mdi-tag-multiple
                            </v-icon>
                            <div v-for="tag in post.tags" class="d-inline">
                            
                                <v-chip
                                    color="accent"
                                    label
                                    text-color="grey lighten-4"
                                    x-small
                                    class="mr-1"
                                    :key="tag"
                                    :to="{path: '/', query: {tag: tag}}"
                                    v-if="searchConditions.selectedTags.includes(tag)"
                                    :class="['v-chip--active']"
                                >
                                    [[ tag ]]
                                </v-chip>
                                <v-chip
                                    color="accent"
                                    label
                                    text-color="grey lighten-4"
                                    x-small
                                    class="mr-1"
                                    :key="tag"
                                    :to="{path: '/', query: {tag: tag}}"
                                    v-else
                                >
                                    [[ tag ]]
                                </v-chip>
                            </div>
                        </div>
                        <v-divider></v-divider>
                    </v-card-subtitle>
                    <v-card-text class="text-body-2 grey--text text--lighten-2">
                        <div class="post-content" v-html="post.summary">
        
                        </div>
                    </v-card-text>
                    <v-card-actions>
                        <v-list-item class="grow">
                            <v-row
                                align="center"
                                justify="end"
                            >
                                <v-btn :to="{path: 'post', query: {url: post.url}}" color="primary" small>Read More</v-btn>
                            </v-row>
                        </v-list-item>
                    </v-card-actions>
                </v-card>

                <v-pagination v-if="displayPosts.length" v-model="page" :length=pageLength @input="pageChange" class="mt-4"></v-pagination>
            </div>
        </v-slide-x-transition>

        <div v-show="!displayPosts.length" style="height: 150vh;"></div>

        <v-snackbar
            v-model="resultSnackbar"
            :timeout=3000
        >
            Found [[ filteredPosts.length ]] Posts.
            <template v-slot:action="{ attrs }">
                <v-btn
                    color="primary"
                    icon
                    v-bind="attrs"
                    @click="resultSnackbar = false"
                >
                    <v-icon>
                        mdi-close
                    </v-icon>
                </v-btn>
            </template>
        </v-snackbar>
    </div>

</script>