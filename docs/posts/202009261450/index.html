<p>不久前才想用vuetify的v-overlay與v-progress-circular來做個loading的延遲畫面，就意外發現了這個好東西：</p>
<p><a href="https://www.npmjs.com/package/vue-loading-overlay">vue-loading-overlay</a>，馬上就來試一下</p>
<p>這東西全名是Vue Loading Overlay Component，顧名思義，就是個full-screen的vue component，README裡面有component和plugin的用法，這次測試的是不用webpack的情況下的情況下使用</p>
<p>最簡單的用法像是這樣</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html"><span style="color:#75715e">&lt;!DOCTYPE html&gt;</span>
&lt;<span style="color:#f92672">html</span>&gt;
&lt;<span style="color:#f92672">head</span>&gt;
  &lt;<span style="color:#f92672">link</span> <span style="color:#a6e22e">href</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;https://fonts.googleapis.com/css?family=Roboto:100,300,400,500,700,900&#34;</span> <span style="color:#a6e22e">rel</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;stylesheet&#34;</span>&gt;
  &lt;<span style="color:#f92672">link</span> <span style="color:#a6e22e">href</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;https://cdn.jsdelivr.net/npm/@mdi/font@5.x/css/materialdesignicons.min.css&#34;</span> <span style="color:#a6e22e">rel</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;stylesheet&#34;</span>&gt;
  &lt;<span style="color:#f92672">link</span> <span style="color:#a6e22e">href</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;https://cdn.jsdelivr.net/npm/vuetify@2.x/dist/vuetify.min.css&#34;</span> <span style="color:#a6e22e">rel</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;stylesheet&#34;</span>&gt;
  &lt;<span style="color:#f92672">meta</span> <span style="color:#a6e22e">name</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;viewport&#34;</span> <span style="color:#a6e22e">content</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, minimal-ui&#34;</span>&gt;
&lt;/<span style="color:#f92672">head</span>&gt;
&lt;<span style="color:#f92672">body</span>&gt;
  &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">id</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;app&#34;</span>&gt;
    &lt;<span style="color:#f92672">loading</span> <span style="color:#a6e22e">:active</span><span style="color:#960050;background-color:#1e0010">.</span><span style="color:#a6e22e">sync</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;isLoading&#34;</span>&gt;&lt;/<span style="color:#f92672">loading</span>&gt;
  &lt;/<span style="color:#f92672">div</span>&gt;

  &lt;<span style="color:#f92672">script</span> <span style="color:#a6e22e">src</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;https://cdn.jsdelivr.net/npm/vue@2.6/dist/vue.min.js&#34;</span>&gt;&lt;/<span style="color:#f92672">script</span>&gt;
  &lt;<span style="color:#f92672">script</span> <span style="color:#a6e22e">src</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;https://cdn.jsdelivr.net/npm/vue-loading-overlay@3&#34;</span>&gt;&lt;/<span style="color:#f92672">script</span>&gt;
  &lt;<span style="color:#f92672">link</span> <span style="color:#a6e22e">href</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;https://cdn.jsdelivr.net/npm/vue-loading-overlay@3/dist/vue-loading.css&#34;</span> <span style="color:#a6e22e">rel</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;stylesheet&#34;</span>&gt;

  &lt;<span style="color:#f92672">script</span>&gt;
    <span style="color:#a6e22e">Vue</span>.<span style="color:#a6e22e">component</span>(<span style="color:#e6db74">&#39;loading&#39;</span>, <span style="color:#a6e22e">VueLoading</span>)
    <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Vue</span>({
      <span style="color:#a6e22e">el</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;#app&#39;</span>,
      <span style="color:#a6e22e">data</span><span style="color:#f92672">:</span>{
        <span style="color:#a6e22e">isLoading</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">true</span>,
      },
    })
  &lt;/<span style="color:#f92672">script</span>&gt; 
&lt;/<span style="color:#f92672">body</span>&gt;
&lt;/<span style="color:#f92672">html</span>&gt;
</code></pre></div><p><br></br>
個人目前是放在updated來結束loading overlay</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#a6e22e">Vue</span>.<span style="color:#a6e22e">component</span>(<span style="color:#e6db74">&#39;loading&#39;</span>, <span style="color:#a6e22e">VueLoading</span>)
<span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Vue</span>({
  <span style="color:#a6e22e">el</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;#app&#39;</span>,
  <span style="color:#a6e22e">data</span><span style="color:#f92672">:</span>{
    <span style="color:#a6e22e">isLoading</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">true</span>,
  },
  .....
  <span style="color:#a6e22e">updated</span> () {
    <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">isLoading</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">false</span>
  }
})
</code></pre></div><p>如此一來每次re-render結束的時候都會關閉loading overlay
<br></br>
plugin的話也能用instance method操作，如以下set config及hide的操作</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">loader</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">vm</span>.<span style="color:#a6e22e">$loading</span>.<span style="color:#a6e22e">show</span>({
 <span style="color:#a6e22e">color</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;blue&#39;</span>
},{
})

<span style="color:#a6e22e">vm</span>.<span style="color:#a6e22e">$loading</span>.<span style="color:#a6e22e">hide</span>()
</code></pre></div><p><br></br>
這東西很適合用在SPA上，尤其是在做異步通訊的時候，借這個API<a href="https://github.com/ALPHACamp/movie-list-api">https://github.com/ALPHACamp/movie-list-api</a>來做個概念展示，</p>
<p>兩個方法都是在updated的時候關閉overlay，但是動作有微妙差異</p>
<p class="codepen" data-height="265" data-theme-id="light" data-default-tab="html,result" data-user="aergfaerfaerg" data-slug-hash="MWyLMWq" style="height: 265px; box-sizing: border-box; display: flex; align-items: center; justify-content: center; border: 2px solid; margin: 1em 0; padding: 1em;" data-pen-title="vue loading">
  <span>See the Pen <a href="https://codepen.io/aergfaerfaerg/pen/MWyLMWq">
  vue loading</a> by rgsergreg (<a href="https://codepen.io/aergfaerfaerg">@aergfaerfaerg</a>)
  on <a href="https://codepen.io">CodePen</a>.</span>
</p>
<script async src="https://static.codepen.io/assets/embed/ei.js"></script>
<br></br>
就算不使用vue.js作為view model的主體，拿來混用似乎也是種選擇？
<p class="codepen" data-height="265" data-theme-id="light" data-default-tab="js,result" data-user="aergfaerfaerg" data-slug-hash="jOqyZNb" style="height: 265px; box-sizing: border-box; display: flex; align-items: center; justify-content: center; border: 2px solid; margin: 1em 0; padding: 1em;" data-pen-title="vue loading2">
  <span>See the Pen <a href="https://codepen.io/aergfaerfaerg/pen/jOqyZNb">
  vue loading2</a> by rgsergreg (<a href="https://codepen.io/aergfaerfaerg">@aergfaerfaerg</a>)
  on <a href="https://codepen.io">CodePen</a>.</span>
</p>
<script async src="https://static.codepen.io/assets/embed/ei.js"></script>
<br></br>
之後還有新想法會記錄在這裡