



    
        
    




{
  "result": {
    "content": "\u003cp\u003e計畫使用Hugo來製作Single Page，有JSON會方便很多，許多地方寫得不是很清楚所以筆記一下\u003c/p\u003e\n\u003cp\u003e首先是在config.toml增加下列設定，也就是kind後面放上想輸出的格式\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4\"\u003e\u003ccode class=\"language-:config.toml\" data-lang=\":config.toml\"\u003e...\n[\u003cspan style=\"color:#a6e22e\"\u003eoutputs\u003c/span\u003e]\n  \u003cspan style=\"color:#a6e22e\"\u003epage\u003c/span\u003e = [\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;HTML\u0026#34;\u003c/span\u003e, \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;JSON\u0026#34;\u003c/span\u003e]\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003e為了簡化所以範例只使用page，其他kind如同home、section、taxonamy或term其實大同小異\n\u003cbr\u003e\u003c/br\u003e\nrun起來會很貼心的警告沒有template\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003eWARN 2020/10/11 15:35:48 found no layout file for \u0026quot;JSON\u0026quot; for kind \u0026quot;page\u0026quot;: You should create a template file which matches Hugo Layouts Lookup Rules for this combination.\r\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003cbr\u003e\u003c/br\u003e\n接下來就建立template，因為是page所以template名為single，section的話就是list，以此類推\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e│  404.html\r\n│  index.html\r\n│\r\n├─partials\r\n│     footer.html\r\n│     head.html\r\n│     header.html\r\n│\r\n├─posts\r\n│      single.html\r\n│      single.json ★\r\n│\r\n└─_default\r\n        baseof.html\r\n        baseof.json ★\r\n        list.html\r\n        single.html\r\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003cbr\u003e\u003c/br\u003e\n仿造baseof.html的baseof.json，含result這個key\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4\"\u003e\u003ccode class=\"language-:_default/baseof.json\" data-lang=\":_default/baseof.json\"\u003e{\n    \u003cspan style=\"color:#f92672\"\u003e\u0026#34;result\u0026#34;\u003c/span\u003e : {\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e{\u003c/span\u003e \u003cspan style=\"color:#960050;background-color:#1e0010\"\u003eblock\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e\u0026#34;result\u0026#34;\u003c/span\u003e \u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e.\u003c/span\u003e}}{\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e{\u003c/span\u003e \u003cspan style=\"color:#960050;background-color:#1e0010\"\u003eend\u003c/span\u003e }\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e}\u003c/span\u003e\n\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003e\u003cbr\u003e\u003c/br\u003e\n主角的single.json，如此一來single.json內的block就會包進baseof輸出\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4\"\u003e\u003ccode class=\"language-posts/single.json\" data-lang=\"posts/single.json\"\u003e{\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e{\u003c/span\u003e \u003cspan style=\"color:#960050;background-color:#1e0010\"\u003edefine\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e\u0026#34;result\u0026#34;\u003c/span\u003e }\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e}\u003c/span\u003e\n{\n    \u003cspan style=\"color:#f92672\"\u003e\u0026#34;title\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;{{ .Title }}\u0026#34;\u003c/span\u003e,\n    \u003cspan style=\"color:#f92672\"\u003e\u0026#34;date\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;{{ .Date.Format \u0026#34;\u003c/span\u003e\u003cspan style=\"color:#ae81ff\"\u003e2006-01-02\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e15\u003c/span\u003e:\u003cspan style=\"color:#ae81ff\"\u003e04\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34; }}\u0026#34;\u003c/span\u003e,\n    \u003cspan style=\"color:#f92672\"\u003e\u0026#34;draft\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;{{ .Draft }}\u0026#34;\u003c/span\u003e,\n    \u003cspan style=\"color:#f92672\"\u003e\u0026#34;categories\u0026#34;\u003c/span\u003e: \n    [\n        {\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e{\u003c/span\u003e \u003cspan style=\"color:#960050;background-color:#1e0010\"\u003erange\u003c/span\u003e \u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e$i,\u003c/span\u003e \u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e$e\u003c/span\u003e \u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e:=\u003c/span\u003e \u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e.Params.Categories\u003c/span\u003e }\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e}\u003c/span\u003e\n            {\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e{\u003c/span\u003e \u003cspan style=\"color:#960050;background-color:#1e0010\"\u003eif\u003c/span\u003e \u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e$i\u003c/span\u003e }\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e}\u003c/span\u003e, {\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e{\u003c/span\u003e \u003cspan style=\"color:#960050;background-color:#1e0010\"\u003eend\u003c/span\u003e }\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;{{ $e }}\u0026#34;\u003c/span\u003e\n        {\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e{\u003c/span\u003e \u003cspan style=\"color:#960050;background-color:#1e0010\"\u003eend\u003c/span\u003e }\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e}\u003c/span\u003e\n    ],\n    \u003cspan style=\"color:#f92672\"\u003e\u0026#34;tags\u0026#34;\u003c/span\u003e:\n    [\n        {\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e{\u003c/span\u003e \u003cspan style=\"color:#960050;background-color:#1e0010\"\u003erange\u003c/span\u003e \u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e$i,\u003c/span\u003e \u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e$e\u003c/span\u003e \u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e:=\u003c/span\u003e \u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e.Params.Tags\u003c/span\u003e }\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e}\u003c/span\u003e\n            {\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e{\u003c/span\u003e \u003cspan style=\"color:#960050;background-color:#1e0010\"\u003eif\u003c/span\u003e \u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e$i\u003c/span\u003e }\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e}\u003c/span\u003e, {\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e{\u003c/span\u003e \u003cspan style=\"color:#960050;background-color:#1e0010\"\u003eend\u003c/span\u003e }\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;{{ $e }}\u0026#34;\u003c/span\u003e\n        {\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e{\u003c/span\u003e \u003cspan style=\"color:#960050;background-color:#1e0010\"\u003eend\u003c/span\u003e }\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e}\u003c/span\u003e\n    ],\n\n    \u003cspan style=\"color:#f92672\"\u003e\u0026#34;url\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;{{ .Permalink }}\u0026#34;\u003c/span\u003e\n}\n{\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e{\u003c/span\u003e \u003cspan style=\"color:#960050;background-color:#1e0010\"\u003eend\u003c/span\u003e }\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003e\u003cbr\u003e\u003c/br\u003e\n輸出後會在目錄下產生index.json，內容像是這個樣子，如此一來就大功告成了\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4\"\u003e\u003ccode class=\"language-:posts/202009221717/index.json\" data-lang=\":posts/202009221717/index.json\"\u003e{\n    \u003cspan style=\"color:#f92672\"\u003e\u0026#34;result\u0026#34;\u003c/span\u003e : \n{\n    \u003cspan style=\"color:#f92672\"\u003e\u0026#34;title\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;讓Hugo輸出JSON格式\u0026#34;\u003c/span\u003e,\n    \u003cspan style=\"color:#f92672\"\u003e\u0026#34;date\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;2020-09-22 17:17\u0026#34;\u003c/span\u003e,\n    \u003cspan style=\"color:#f92672\"\u003e\u0026#34;draft\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;true\u0026#34;\u003c/span\u003e,\n    \u003cspan style=\"color:#f92672\"\u003e\u0026#34;categories\u0026#34;\u003c/span\u003e: \n    [\n        \n            \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;網頁製作\u0026#34;\u003c/span\u003e\n        \n    ],\n    \u003cspan style=\"color:#f92672\"\u003e\u0026#34;tags\u0026#34;\u003c/span\u003e:\n    [\n        \n            \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Hugo\u0026#34;\u003c/span\u003e\n        \n    ],\n\n    \u003cspan style=\"color:#f92672\"\u003e\u0026#34;url\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;http://localhost:1313/posts/2020/09/202009221717/\u0026#34;\u003c/span\u003e\n}\n\n}\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003e\u003cbr\u003e\u003c/br\u003e\n比較需要注意的是內容很容易parse error…\u003c/p\u003e",
    "kind": "page",
    "params": {
      "categories": [
        "WebDevelopment"
      ],
      "date": "2020-09-22T17:17:48+08:00",
      "draft": false,
      "iscjklanguage": true,
      "lastmod": "2020-09-22T17:17:48+08:00",
      "publishdate": "2020-09-22T17:17:48+08:00",
      "tags": [
        "Hugo"
      ],
      "title": "讓Hugo輸出JSON格式"
    },
    "permalink": "https://mikanbearer.github.io/posts/202009221717/index.json",
    "type": "posts",
    "wordcount": 602
  }
}