<p>偶然看到這個<a href="https://github.com/atosatto/ansible-dockerswarm">Ansible Role: Docker</a>就想嘗試一下，用得順的話就能輕鬆部屬swarm cluster了，所以試著操作一遍</p>
<p>本次環境用三台VM，分別是</p>
<ul>
<li>Debian 9.7(Ansible)：192.168.149.130</li>
<li>Debian 9.7(Swarm Manager) * 2：192.168.149.131</li>
<li>Debian 9.7(Swarm Worker) * 2：192.168.149.133
<br></br></li>
</ul>
<p>首先使用ansible galaxy下載role</p>
<pre><code>$ ansible-galaxy install atosatto.docker-swarm
</code></pre><p><br></br>
工作目錄的樹狀圖，不節外生枝，只要一個inventory和playbook就好</p>
<pre><code>.
├── hosts
└── playbook.yml
</code></pre><p><br></br>
Inventory file主要分為[docker_swarm_manager]和[docker_swarm_worker]兩個group，這個role是用group name來區別manager和worker</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#66d9ef">all</span>:
  <span style="color:#66d9ef">children</span>:
    <span style="color:#66d9ef">docker_swarm_manager</span>:
      <span style="color:#66d9ef">hosts</span>:
        <span style="color:#66d9ef">manager01</span>:
          <span style="color:#66d9ef">ansible_host</span>: <span style="color:#ae81ff">192.168.149.131</span>
          <span style="color:#66d9ef">swarm_labels</span>: deploy
    <span style="color:#66d9ef">docker_swarm_worker</span>:
      <span style="color:#66d9ef">hosts</span>:
        <span style="color:#66d9ef">worker01</span>:
          <span style="color:#66d9ef">ansible_host</span>: <span style="color:#ae81ff">192.168.149.133</span>
          <span style="color:#66d9ef">swarm_labels</span>: [<span style="color:#e6db74">&#39;foo&#39;</span>, <span style="color:#e6db74">&#39;bar&#39;</span>]
  <span style="color:#66d9ef">vars</span>:
    <span style="color:#66d9ef">ansible_user</span>: qaz
    <span style="color:#66d9ef">ansible_password</span>: <span style="color:#ae81ff">123</span>
    <span style="color:#66d9ef">ansible_python_interpreter</span>: auto_legacy_silent
</code></pre></div><p><br></br></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-:playbook.yaml" data-lang=":playbook.yaml">
---
- <span style="color:#66d9ef">hosts</span>: all
  <span style="color:#66d9ef">become</span>: yes
  <span style="color:#66d9ef">become_method</span>: su
  <span style="color:#66d9ef">roles</span>:
    - { <span style="color:#66d9ef">role</span>: atosatto.docker-swarm }
</code></pre></div><p><br></br>
就這樣出發！！然後會出現兩個error</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ ansible-playbook playbook.yml -i hosts -K
...
TASK <span style="color:#f92672">[</span>atosatto.docker-swarm : include_tasks<span style="color:#f92672">]</span> ***********************************************************************************************************************************************************************************************
included: /home/zaq/.ansible/roles/atosatto.docker-swarm/tasks/setup-swarm-labels.yml <span style="color:#66d9ef">for</span> manager01, worker01

TASK <span style="color:#f92672">[</span>atosatto.docker-swarm : Get list of labels.<span style="color:#f92672">]</span> *****************************************************************************************************************************************************************************************
ok: <span style="color:#f92672">[</span>manager01 -&gt; 192.168.149.131<span style="color:#f92672">]</span>
fatal: <span style="color:#f92672">[</span>worker01 -&gt; 192.168.149.131<span style="color:#f92672">]</span>: FAILED! <span style="color:#f92672">=</span>&gt; <span style="color:#f92672">{</span><span style="color:#e6db74">&#34;changed&#34;</span>: false, <span style="color:#e6db74">&#34;cmd&#34;</span>: <span style="color:#f92672">[</span><span style="color:#e6db74">&#34;docker&#34;</span>, <span style="color:#e6db74">&#34;inspect&#34;</span>, <span style="color:#e6db74">&#34;--format&#34;</span>, <span style="color:#e6db74">&#34;{{ range </span>$key<span style="color:#e6db74">, </span>$value<span style="color:#e6db74"> := .Spec.Labels }}{{ printf \&#34;%s\\n\&#34; </span>$key<span style="color:#e6db74"> }}{{ end }}&#34;</span>, <span style="color:#e6db74">&#34;debian2.localdomain&#34;</span><span style="color:#f92672">]</span>, <span style="color:#e6db74">&#34;delta&#34;</span>: <span style="color:#e6db74">&#34;0:00:00.147106&#34;</span>, <span style="color:#e6db74">&#34;end&#34;</span>: <span style="color:#e6db74">&#34;2020-09-04 11:18:20.899896&#34;</span>, <span style="color:#e6db74">&#34;msg&#34;</span>: <span style="color:#e6db74">&#34;non-zero return code&#34;</span>, <span style="color:#e6db74">&#34;rc&#34;</span>: 1, <span style="color:#e6db74">&#34;start&#34;</span>: <span style="color:#e6db74">&#34;2020-09-04 11:18:20.752790&#34;</span>, <span style="color:#e6db74">&#34;stderr&#34;</span>: <span style="color:#e6db74">&#34;Error: No such object: debian2.localdomain&#34;</span>, <span style="color:#e6db74">&#34;stderr_lines&#34;</span>: <span style="color:#f92672">[</span><span style="color:#e6db74">&#34;Error: No such object: debian2.localdomain&#34;</span><span style="color:#f92672">]</span>, <span style="color:#e6db74">&#34;stdout&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>, <span style="color:#e6db74">&#34;stdout_lines&#34;</span>: <span style="color:#f92672">[]}</span>
...
fatal: <span style="color:#f92672">[</span>manager01<span style="color:#f92672">]</span>: FAILED! <span style="color:#f92672">=</span>&gt; <span style="color:#f92672">{</span><span style="color:#e6db74">&#34;msg&#34;</span>: <span style="color:#e6db74">&#34;You need to install \&#34;jmespath\&#34; prior to running json_query filter&#34;</span><span style="color:#f92672">}</span>
</code></pre></div><p><br></br>
第二個比較簡單所以先解決，只是ansible machine缺了jmespath這個包</p>
<pre><code># apt install python jmespath
</code></pre><p><br></br></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ ansible-playbook 
...
$ ansible-playbook playbook.yml -i hosts -K
BECOME password: 

...
TASK <span style="color:#f92672">[</span>atosatto.docker-swarm : Download docker-compose.<span style="color:#f92672">]</span> ************************************************************************************************************************************************************************************
changed: <span style="color:#f92672">[</span>manager01<span style="color:#f92672">]</span>

PLAY RECAP *********************************************************************************************************************************************************************************************************************************
manager01                  : ok<span style="color:#f92672">=</span><span style="color:#ae81ff">35</span>   changed<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>    unreachable<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>    failed<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>    skipped<span style="color:#f92672">=</span><span style="color:#ae81ff">25</span>   rescued<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>    ignored<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>   
worker01                   : ok<span style="color:#f92672">=</span><span style="color:#ae81ff">27</span>   changed<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>    unreachable<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>    failed<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>    skipped<span style="color:#f92672">=</span><span style="color:#ae81ff">20</span>   rescued<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>    ignored<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>   
</code></pre></div><p>就能繼續跑task了
<br></br>
另一個問題相當顯而易見，主要是role的問題</p>
<pre><code>&quot;stderr&quot;: &quot;Error: No such object: debian2.localdomain&quot;
</code></pre><p>可以看得出是docker inspect的指令找不到FQDN，因為這裡使用的是hostname
<br></br>
接著來源頭找找，有三處的ansible_fqdn</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="display:block;width:100%;background-color:#3c3d38"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span></span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="display:block;width:100%;background-color:#3c3d38"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span></span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="display:block;width:100%;background-color:#3c3d38"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span></span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-:~/.ansible/roles/atosatto.docker-swarm/tasks/setup-swarm-labels.yml" data-lang=":~/.ansible/roles/atosatto.docker-swarm/tasks/setup-swarm-labels.yml">---

- <span style="color:#66d9ef">name</span>: Get list of labels.
  <span style="color:#66d9ef">command</span>: &gt;<span style="color:#e6db74">-
</span><span style="color:#e6db74">         docker inspect</span>
         --format {% raw %}<span style="color:#e6db74">&#39;{{ range $key, $value := .Spec.Labels }}{{ printf &#34;%s\n&#34; $key }}{{ end }}&#39;</span>{% endraw %}
<span style="display:block;width:100%;background-color:#3c3d38">         {{ ansible_fqdn|lower }}
</span>  <span style="color:#66d9ef">register</span>: docker_swarm_labels
  <span style="color:#66d9ef">changed_when</span>: <span style="color:#66d9ef">false</span>
  <span style="color:#66d9ef">delegate_to</span>: <span style="color:#e6db74">&#34;{{ groups[&#39;docker_swarm_manager&#39;][0] }}&#34;</span>
  <span style="color:#66d9ef">delegate_facts</span>: <span style="color:#66d9ef">true</span>
  <span style="color:#66d9ef">tags</span>:
    - swarm_labels

- <span style="color:#66d9ef">name</span>: Remove labels from swarm node.
<span style="display:block;width:100%;background-color:#3c3d38">  <span style="color:#66d9ef">command</span>: docker node update --label-rm {{ item }} {{ ansible_fqdn|lower }}
</span>  <span style="color:#66d9ef">with_items</span>: <span style="color:#e6db74">&#34;{{ docker_swarm_labels.stdout_lines }}&#34;</span>
  <span style="color:#66d9ef">when</span>: item not in swarm_labels
  <span style="color:#66d9ef">delegate_to</span>: <span style="color:#e6db74">&#34;{{ groups[&#39;docker_swarm_manager&#39;][0] }}&#34;</span>
  <span style="color:#66d9ef">delegate_facts</span>: <span style="color:#66d9ef">true</span>
  <span style="color:#66d9ef">tags</span>:
    - swarm_labels

- <span style="color:#66d9ef">name</span>: Assign labels to swarm nodes if any.
<span style="display:block;width:100%;background-color:#3c3d38">  <span style="color:#66d9ef">command</span>: docker node update --label-add {{ item }}=<span style="color:#66d9ef">true</span> {{ ansible_fqdn|lower }}
</span>  <span style="color:#66d9ef">when</span>: item not in docker_swarm_labels.stdout_lines
  <span style="color:#66d9ef">with_items</span>:
    - <span style="color:#e6db74">&#34;{{ swarm_labels  | default([]) }}&#34;</span>
  <span style="color:#66d9ef">delegate_to</span>: <span style="color:#e6db74">&#34;{{ groups[&#39;docker_swarm_manager&#39;][0] }}&#34;</span>
  <span style="color:#66d9ef">delegate_facts</span>: <span style="color:#66d9ef">true</span>
  <span style="color:#66d9ef">tags</span>:
    - swarm_labels
</code></pre></td></tr></table>
</div>
</div><p><br></br>
只要修改成下面的樣子就沒問題了</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="display:block;width:100%;background-color:#3c3d38"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span></span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="display:block;width:100%;background-color:#3c3d38"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span></span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="display:block;width:100%;background-color:#3c3d38"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span></span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-:~/.ansible/roles/atosatto.docker-swarm/tasks/setup-swarm-labels.yml" data-lang=":~/.ansible/roles/atosatto.docker-swarm/tasks/setup-swarm-labels.yml">---

- <span style="color:#66d9ef">name</span>: Get list of labels.
  <span style="color:#66d9ef">command</span>: &gt;<span style="color:#e6db74">-
</span><span style="color:#e6db74">         docker inspect</span>
         --format {% raw %}<span style="color:#e6db74">&#39;{{ range $key, $value := .Spec.Labels }}{{ printf &#34;%s\n&#34; $key }}{{ end }}&#39;</span>{% endraw %}
<span style="display:block;width:100%;background-color:#3c3d38">         {{ ansible_hostname|lower }}
</span>  <span style="color:#66d9ef">register</span>: docker_swarm_labels
  <span style="color:#66d9ef">changed_when</span>: <span style="color:#66d9ef">false</span>
  <span style="color:#66d9ef">delegate_to</span>: <span style="color:#e6db74">&#34;{{ groups[&#39;docker_swarm_manager&#39;][0] }}&#34;</span>
  <span style="color:#66d9ef">delegate_facts</span>: <span style="color:#66d9ef">true</span>
  <span style="color:#66d9ef">tags</span>:
    - swarm_labels

- <span style="color:#66d9ef">name</span>: Remove labels from swarm node.
<span style="display:block;width:100%;background-color:#3c3d38">  <span style="color:#66d9ef">command</span>: docker node update --label-rm {{ item }} {{ ansible_hostname|lower }}
</span>  <span style="color:#66d9ef">with_items</span>: <span style="color:#e6db74">&#34;{{ docker_swarm_labels.stdout_lines }}&#34;</span>
  <span style="color:#66d9ef">when</span>: item not in swarm_labels
  <span style="color:#66d9ef">delegate_to</span>: <span style="color:#e6db74">&#34;{{ groups[&#39;docker_swarm_manager&#39;][0] }}&#34;</span>
  <span style="color:#66d9ef">delegate_facts</span>: <span style="color:#66d9ef">true</span>
  <span style="color:#66d9ef">tags</span>:
    - swarm_labels

- <span style="color:#66d9ef">name</span>: Assign labels to swarm nodes if any.
<span style="display:block;width:100%;background-color:#3c3d38">  <span style="color:#66d9ef">command</span>: docker node update --label-add {{ item }}=<span style="color:#66d9ef">true</span> {{ ansible_hostname|lower }}
</span>  <span style="color:#66d9ef">when</span>: item not in docker_swarm_labels.stdout_lines
  <span style="color:#66d9ef">with_items</span>:
    - <span style="color:#e6db74">&#34;{{ swarm_labels  | default([]) }}&#34;</span>
  <span style="color:#66d9ef">delegate_to</span>: <span style="color:#e6db74">&#34;{{ groups[&#39;docker_swarm_manager&#39;][0] }}&#34;</span>
  <span style="color:#66d9ef">delegate_facts</span>: <span style="color:#66d9ef">true</span>
  <span style="color:#66d9ef">tags</span>:
    - swarm_labels
</code></pre></td></tr></table>
</div>
</div><p><br></br>
接著再嘗試一次</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">$ ansible-playbook playbook.yml -i hosts -K
...


PLAY RECAP *********************************************************************************************************************************************************************************************************************************
manager01                  : ok<span style="color:#f92672">=</span><span style="color:#ae81ff">35</span>   changed<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>    unreachable<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>    failed<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>    skipped<span style="color:#f92672">=</span><span style="color:#ae81ff">25</span>   rescued<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>    ignored<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>   
worker01                   : ok<span style="color:#f92672">=</span><span style="color:#ae81ff">38</span>   changed<span style="color:#f92672">=</span><span style="color:#ae81ff">4</span>    unreachable<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>    failed<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>    skipped<span style="color:#f92672">=</span><span style="color:#ae81ff">22</span>   rescued<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>    ignored<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>   
</code></pre></div><p>成功！
<br></br>
接下來也能到manager上確認一下狀況</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-text" data-lang="text">$ docker node ls
ID                            HOSTNAME            STATUS              AVAILABILITY        MANAGER STATUS      ENGINE VERSION
hjlfykxsxlz5rzfcc17dvxsb7 *   debian1             Ready               Active              Leader              19.03.12
whhhx2g22eh1shn65wdwyx13k     debian2             Ready               Active                                  19.03.12
</code></pre></div>


<v-card class="mt-5 content">
  <v-card-text>
  <div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "mikanmimi" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
  </v-card-text>
</v-card>
