



    
        
    




{
  "result": {
    "content": "\u003cp\u003e覺得將來可能會用到所以筆記下來\u003c/p\u003e\n\u003cp\u003e模擬設備是用Cisco IOL，IOS版本是15.5\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003eRouter\u0026gt;show version\r\nCisco IOS Software, Linux Software (I86BI_LINUX-ADVENTERPRISEK9-M), Version 15.5(2)T, DEVELOPMENT TEST SOFTWARE\r\nTechnical Support: http://www.cisco.com/techsupport\r\nCopyright (c) 1986-2015 by Cisco Systems, Inc.\r\nCompiled Thu 26-Mar-15 07:36 by prod_rel_team\r\n\r\nROM: Bootstrap program is Linux\r\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003cbr\u003e\u003c/br\u003e\u003c/p\u003e\n\u003cp\u003e首先設定ssh，並建立一個local user\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003eRouter\u0026gt;enable \r\nRouter#configure terminal \r\nRouter(config)#hostname R1\r\nR1(config)#ip ssh version 2        \r\nR1(config)#crypto key generate rsa \r\nR1(config)#username admin privilege 15 secret 12345678\r\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003cbr\u003e\u003c/br\u003e\u003c/p\u003e\n\u003cp\u003e設定好line就能ssh登入了\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003eR1(config)#line vty 0 4\r\nR1(config-line)#transport input ssh\r\nR1(config-line)#login local \r\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003cbr\u003e\u003c/br\u003e\u003c/p\u003e\n\u003cp\u003e接下來準備測試用的key pair，一般般的rsa\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e$ ssh-keygen -t rsa -b 4096\r\n$ cat .ssh/id_rsa.pub\r\nssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAACAQDQ/RNys...\r\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003cbr\u003e\u003c/br\u003e\u003c/p\u003e\n\u003cp\u003e回到router上，使用以下指令，進入R1(conf-ssh-pubkey-data)#時就把public key分段段一點一點丟上去，exit後就儲存了\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003eR1(config)#ip ssh pubkey-chain\r\nR1(conf-ssh-pubkey)#username admin\r\nR1(conf-ssh-pubkey-user)#key-string \r\nR1(conf-ssh-pubkey-data)#ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAACAQDQ/RNys                                       \r\n...\r\nR1(conf-ssh-pubkey-data)#exit\r\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003cbr\u003e\u003c/br\u003e\u003c/p\u003e\n\u003cp\u003e最後設定public key認證\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003eR1(config)#ip ssh server authenticate user publickey\r\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003cbr\u003e\u003c/br\u003e\u003c/p\u003e\n\u003cp\u003e完成後就可以直接測試了，應該像是這樣的結果\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e$ ssh admin@192.168.171.201\r\nR1#\r\n\u003c/code\u003e\u003c/pre\u003e",
    "kind": "page",
    "params": {
      "categories": [
        "Cisco",
        "Operation"
      ],
      "date": "2020-11-17T15:36:33+08:00",
      "draft": false,
      "iscjklanguage": true,
      "lastmod": "2020-11-17T15:36:33+08:00",
      "publishdate": "2020-11-17T15:36:33+08:00",
      "tags": [
        "IOS"
      ],
      "title": "在Cisco IOS上啟用免密碼SSH登入"
    },
    "permalink": "https://mikanbearer.github.io/posts/2020/11/202011171536/index.json",
    "type": "posts",
    "wordcount": 303
  }
}