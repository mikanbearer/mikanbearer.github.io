



    
        
    




{
  "result": {
    "content": "\u003cp\u003e弄這個blog遇到的問題，想使用Vue Router來取代Hugo部分list功能的小筆記\u003c/p\u003e\n\u003cp\u003e在Hugo的情況是會產生出新的靜態頁面\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003ehttp://localhost:1313/tags/Hugo/\r\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003cbr\u003e\u003c/br\u003e\n為了實現SPA，想法是取得Vue Router的Query來進行搜尋，求的是url後面那段query string\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003ehttp://localhost:1313/#/?tag=Hugo\r\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003cbr\u003e\u003c/br\u003e\n為了在任何location都能回到'/'，所以使用method來進行回首頁的動作來搜尋本blog的貼文\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4\"\u003e\u003ccode class=\"language-js\" data-lang=\"js\"\u003e...\n\u003cspan style=\"color:#a6e22e\"\u003emethods\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e:\u003c/span\u003e {\n      \u003cspan style=\"color:#a6e22e\"\u003etoFilteredList\u003c/span\u003e () {\n          \u003cspan style=\"color:#66d9ef\"\u003ethis\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003e$router\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003epush\u003c/span\u003e({\n            \u003cspan style=\"color:#a6e22e\"\u003epath\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e:\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;/\u0026#39;\u003c/span\u003e,\n            \u003cspan style=\"color:#a6e22e\"\u003equery\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e:\u003c/span\u003e {\n              \u003cspan style=\"color:#a6e22e\"\u003ekeyword\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e:\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003ethis\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003ekeyword\u003c/span\u003e,\n              \u003cspan style=\"color:#a6e22e\"\u003ecategory\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e:\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003ethis\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eselectedCategories\u003c/span\u003e, \n              \u003cspan style=\"color:#a6e22e\"\u003etag\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e:\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003ethis\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eselectedTags\u003c/span\u003e\n            }\n          })\n      },\n    }\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003e\u003cbr\u003e\u003c/br\u003e\n但是如果目標的path和當前的一樣，會無法刷新，產生以下error\n\u003cimg src=\"1.png\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003e畢竟路徑一樣呢\n\u003cbr\u003e\u003c/br\u003e\n在stackoverflow看到了這篇\u003ca href=\"https://stackoverflow.com/questions/41301099/do-we-have-router-reload-in-vue-router\"\u003ehttps://stackoverflow.com/questions/41301099/do-we-have-router-reload-in-vue-router\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003e裡面不少人提起了router.go()，但不論是用window的go還是Vue Router的router.go()，都是瀏覽器reload整個頁面，不符合需求，\n畢竟當初只是想傳值而已，所以要用Vue Router解決的話必然會是push與replace，不會是go\u003c/p\u003e\n\u003cp\u003e是最後的解決方法是改為router.history.push，這樣不論怎麼call，當前頁還是頁面，都不會跳轉，但是$route是確確實實更新了\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4\"\u003e\u003ccode class=\"language-js\" data-lang=\"js\"\u003e...\n    \u003cspan style=\"color:#a6e22e\"\u003emethods\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e:\u003c/span\u003e {\n      \u003cspan style=\"color:#a6e22e\"\u003etoFilteredList\u003c/span\u003e () {\n        \u003cspan style=\"color:#66d9ef\"\u003eif\u003c/span\u003e (\u003cspan style=\"color:#66d9ef\"\u003ethis\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003e$route\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003epath\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e==\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;/\u0026#39;\u003c/span\u003e) {\n          \u003cspan style=\"color:#66d9ef\"\u003ethis\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003e$router\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003ehistory\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003epush\u003c/span\u003e({\n            \u003cspan style=\"color:#a6e22e\"\u003equery\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e:\u003c/span\u003e {\n              \u003cspan style=\"color:#a6e22e\"\u003ekeyword\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e:\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003ethis\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003ekeyword\u003c/span\u003e,\n              \u003cspan style=\"color:#a6e22e\"\u003ecategory\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e:\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003ethis\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eselectedCategories\u003c/span\u003e, \n              \u003cspan style=\"color:#a6e22e\"\u003etag\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e:\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003ethis\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eselectedTags\u003c/span\u003e\n            }\n          })\n        }\n        \u003cspan style=\"color:#66d9ef\"\u003eelse\u003c/span\u003e {\n          \u003cspan style=\"color:#66d9ef\"\u003ethis\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003e$router\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003epush\u003c/span\u003e({\n            \u003cspan style=\"color:#a6e22e\"\u003epath\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e:\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;/\u0026#39;\u003c/span\u003e,\n            \u003cspan style=\"color:#a6e22e\"\u003equery\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e:\u003c/span\u003e {\n              \u003cspan style=\"color:#a6e22e\"\u003ekeyword\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e:\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003ethis\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003ekeyword\u003c/span\u003e,\n              \u003cspan style=\"color:#a6e22e\"\u003ecategory\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e:\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003ethis\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eselectedCategories\u003c/span\u003e, \n              \u003cspan style=\"color:#a6e22e\"\u003etag\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e:\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003ethis\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eselectedTags\u003c/span\u003e\n            }\n          })\n        }\n      },\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003e\u003cbr\u003e\u003c/br\u003e\n再來只要到components中使用watch來監控route，就能去拿到新的query string了\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003econst List = {\r\n    ...\r\n    computed: {\r\n      getQuery () {\r\n        return this.$route.query\r\n      }\r\n    },\r\n\r\n\r\n    watch: {\r\n      getQuery (to, from) {\r\n         console.log(to)\r\n       }\r\n    },\r\n}\r\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003cbr\u003e\u003c/br\u003e\n結果姑且算是理想\n\u003cimg src=\"1.gif\" alt=\"\"\u003e\u003c/p\u003e",
    "kind": "page",
    "params": {
      "categories": [
        "WebDevelopment"
      ],
      "date": "2020-10-06T10:53:36+08:00",
      "draft": false,
      "iscjklanguage": true,
      "lastmod": "2020-10-06T10:53:36+08:00",
      "publishdate": "2020-10-06T10:53:36+08:00",
      "tags": [
        "Vue.js"
      ],
      "title": "Vue Router在同一route傳遞新的query"
    },
    "permalink": "https://mikanbearer.github.io/posts/2020/10/202010061053/index.json",
    "type": "posts",
    "wordcount": 655
  }
}