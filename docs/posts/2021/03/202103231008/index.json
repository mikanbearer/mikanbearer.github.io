



    
        
    




{
  "result": {
    "content": "\u003cp\u003e常常被Nessus之類掃到弱點，希望以後上系統也能多上點心…\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca onclick=\"window.scrollTo({top: document.getElementById('apache').offsetTop, behavior: 'smooth'})\"\u003eApache2\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca onclick=\"window.scrollTo({top: document.getElementById('apache-tlsv1').offsetTop, behavior: 'smooth'})\"\u003eTLS Version 1.0 Protocol Detection\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ca onclick=\"window.scrollTo({top: document.getElementById('postfix').offsetTop, behavior: 'smooth'})\"\u003ePostfix\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca onclick=\"window.scrollTo({top: document.getElementById('postfix-tlsv1').offsetTop, behavior: 'smooth'})\"\u003eTLS Version 1.0 Protocol Detection\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca onclick=\"window.scrollTo({top: document.getElementById('postfix-anon').offsetTop, behavior: 'smooth'})\"\u003eSSL Anonymous Cipher Suites Supported\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ca onclick=\"window.scrollTo({top: document.getElementById('nginx').offsetTop, behavior: 'smooth'})\"\u003eNginx\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca onclick=\"window.scrollTo({top: document.getElementById('nginx-tlsv1').offsetTop, behavior: 'smooth'})\"\u003eTLS Version 1.0 Protocol Detection\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003cbr\u003e\u003c/br\u003e\u003c/p\u003e\n\u003ch2 id=\"apache\"\u003eApache2\u003c/h2\u003e\r\n\u003chr\u003e\n\u003cp\u003e\u003cbr\u003e\u003c/br\u003e\u003c/p\u003e\n\u003cp\u003e常見的Http Server Apache2\n\u003cbr\u003e\u003c/br\u003e\u003c/p\u003e\n\u003ch3 id=\"apache-tlsv1\"\u003eTLS Version 1.0 Protocol Detection\u003c/h3\u003e\r\n\u003cp\u003e\u003cbr\u003e\u003c/br\u003e\n用OpenSSL就能側了，允許TLSv1.0的話會是這樣輸出\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e$ openssl s_client -connect localhost:443 -tls1\r\n\r\n...\r\nNew, TLSv1.0, Cipher is ECDHE-RSA-AES256-SHA\r\nServer public key is 2048 bit\r\nSecure Renegotiation IS supported\r\nCompression: NONE\r\nExpansion: NONE\r\nNo ALPN negotiated\r\nSSL-Session:\r\n    Protocol  : TLSv1\r\n    Cipher    : ECDHE-RSA-AES256-SHA\r\n    Session-ID: C345EF8AA9B62F5396A74B9192EF407D8696A5DB25C30B9AD2AC9CCE034B0F59\r\n    Session-ID-ctx: \r\n    Master-Key: 0D1AD9D0104B7AFBEFD14C9F76C3617C27540E049E0F59595AB6B89A4620CC9F30078A4C6382E9C1B4A18953C96A9D08\r\n    PSK identity: None\r\n    PSK identity hint: None\r\n    SRP username: None\r\n    TLS session ticket lifetime hint: 300 (seconds)\r\n    TLS session ticket:\r\n    0000 - ec d4 07 a4 b9 66 8a b5-fb 0b e8 ef 14 e9 9f 40   .....f.........@\r\n    0010 - 5e b8 6a 5e fd 57 44 66-a4 1f 39 bc 06 57 b9 e2   ^.j^.WDf..9..W..\r\n    0020 - 1a be 5d ad 17 02 1b 32-0b cd 1f 0b f0 82 0f 4a   ..]....2.......J\r\n    0030 - 40 63 f2 d9 00 4c 09 98-61 06 ad 8f a0 47 af 16   @c...L..a....G..\r\n    0040 - 32 b7 21 82 34 44 76 1b-90 83 f7 2f d0 3e 80 18   2.!.4Dv..../.\u0026gt;..\r\n    0050 - 37 c2 36 0c ea f2 c4 d9-f0 40 e1 25 02 30 8c ae   7.6......@.%.0..\r\n    0060 - 6d ec 22 ca 6d e7 1c bc-5d 80 d8 69 00 20 89 27   m.\u0026quot;.m...]..i. .'\r\n    0070 - 80 22 3b db 8b 88 63 33-38 fb 95 78 34 fc d3 8a   .\u0026quot;;...c38..x4...\r\n    0080 - 93 f3 87 89 4e 3c 01 64-b0 5a 68 74 41 53 7e 25   ....N\u0026lt;.d.ZhtAS~%\r\n    0090 - 80 23 5b 6e 45 d6 50 e7-6b 10 f8 f9 84 d5 50 6a   .#[nE.P.k.....Pj\r\n    00a0 - 5b 73 b5 92 69 4e 43 c2-67 7a 99 b1 cc 4c 29 5b   [s..iNC.gz...L)[\r\n    00b0 - b8 b8 e7 93 d9 40 68 1e-32 69 e5 45 07 53 6b a5   .....@h.2i.E.Sk.\r\n\r\n    Start Time: 1617003232\r\n    Timeout   : 7200 (sec)\r\n    Verify return code: 18 (self signed certificate)\r\n    Extended master secret: yes\r\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003cbr\u003e\u003c/br\u003e\u003c/p\u003e\n\u003cp\u003e修改或加入\u003ccode\u003eSSLProtocol TLSv1.2\u003c/code\u003e這行就可以了，允許複數的話就是\u003ccode\u003eSSLProtocol +TLSv1.1 +TLSv1.2\u003c/code\u003e以此類推\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-:/etc/apache2/sites-available/000-default.conf\" data-lang=\":/etc/apache2/sites-available/000-default.conf\"\u003e\u0026lt;VirtualHost *:443\u0026gt;\r\n        ServerAdmin webmaster@localhost\r\n        DocumentRoot /var/www/html\r\n        ErrorLog ${APACHE_LOG_DIR}/error.log\r\n        CustomLog ${APACHE_LOG_DIR}/access.log combined\r\n        SSLEngine on\r\n        SSLProtocol TLSv1.2\r\n        SSLCertificateFile /etc/ssl/certs/ssl-cert-snakeoil.pem\r\n        SSLCertificateKeyFile /etc/ssl/private/ssl-cert-snakeoil.key\r\n\u0026lt;/VirtualHost\u0026gt;\r\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003cbr\u003e\u003c/br\u003e\n改完reload\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e# systemctl restart apache2\r\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003cbr\u003e\u003c/br\u003e\u003c/p\u003e\n\u003cp\u003e輸出變這樣就是成功\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e$ openssl s_client -connect localhost:443 -tls1\r\n\r\n...\r\nNew, (NONE), Cipher is (NONE)\r\nSecure Renegotiation IS NOT supported\r\nCompression: NONE\r\nExpansion: NONE\r\nNo ALPN negotiated\r\nSSL-Session:\r\n    Protocol  : TLSv1\r\n    Cipher    : 0000\r\n    Session-ID: \r\n    Session-ID-ctx: \r\n    Master-Key: \r\n    PSK identity: None\r\n    PSK identity hint: None\r\n    SRP username: None\r\n    Start Time: 1617003350\r\n    Timeout   : 7200 (sec)\r\n    Verify return code: 0 (ok)\r\n    Extended master secret: no\r\n---\r\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003cbr\u003e\u003c/br\u003e\u003c/p\u003e\n\u003ch2 id=\"postfix\"\u003ePostfix\u003c/h2\u003e\r\n\u003chr\u003e\n\u003cp\u003e\u003cbr\u003e\u003c/br\u003e\u003c/p\u003e\n\u003cp\u003e常見的Mail Server，\u003c/p\u003e\n\u003ch3 id=\"postfix-tlsv1\"\u003eTLS Version 1.0 Protocol Detection\u003c/h3\u003e\r\n\u003cp\u003e\u003cbr\u003e\u003c/br\u003e\n用OpenSSL就能側了，允許TLSv1.0的話會是這樣輸出\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e$ openssl s_client -connect localhost:25 -starttls smtp -tls1\r\n\r\n....\r\nNew, TLSv1.0, Cipher is ECDHE-RSA-AES256-SHA\r\nServer public key is 2048 bit\r\nSecure Renegotiation IS supported\r\nCompression: NONE\r\nExpansion: NONE\r\nNo ALPN negotiated\r\nSSL-Session:\r\n    Protocol  : TLSv1\r\n    Cipher    : ECDHE-RSA-AES256-SHA\r\n    Session-ID: 1EDDC1804A4E6395CEAAA89D1C469024B73DADC0E3161333192C1E33402C1827\r\n    Session-ID-ctx: \r\n    Master-Key: 02EE3EF7E7366D3C7155E19CEE4E87ABA198745603FB134B583C8F5F5C7CFE1F1DB53CD7957341575D4D677F6751B3F2\r\n    PSK identity: None\r\n    PSK identity hint: None\r\n    SRP username: None\r\n    TLS session ticket lifetime hint: 7200 (seconds)\r\n    TLS session ticket:\r\n    0000 - cb c6 33 10 12 a6 5b bd-4a e8 6c e3 03 b8 a3 ba   ..3...[.J.l.....\r\n    0010 - e2 80 16 ce 71 4d 5b 82-4f c8 4c ae 94 0e 41 eb   ....qM[.O.L...A.\r\n    0020 - 15 42 af f8 1f a4 1f e0-38 92 a7 fe 26 92 12 57   .B......8...\u0026amp;..W\r\n    0030 - d9 35 e3 e4 ce bc fe 23-5a 30 33 29 3e 5f 43 6d   .5.....#Z03)\u0026gt;_Cm\r\n    0040 - e3 4f 5f c4 74 d0 6a 55-65 53 09 8e 0b 9d 53 3b   .O_.t.jUeS....S;\r\n    0050 - 79 d6 42 4e fb 14 a2 67-aa a9 e0 fa 32 6a 04 be   y.BN...g....2j..\r\n    0060 - 77 9c 8e cf dc 00 ef fd-92 20 8e df 66 e9 c4 4b   w........ ..f..K\r\n    0070 - 9e 87 64 d9 98 4e 03 a5-0d 86 f1 c4 44 57 b6 f8   ..d..N......DW..\r\n    0080 - f0 de 31 01 cf 38 bd 7c-44 1e 61 22 29 f6 b3 c9   ..1..8.|D.a\u0026quot;)...\r\n    0090 - 12 b9 00 f1 91 6d 94 fa-8c 6a 6b d5 2f 4d 37 a9   .....m...jk./M7.\r\n    00a0 - 3d 1f 56 f5 f1 74 0c b5-e6 c5 29 79 0a 6f 5c 49   =.V..t....)y.o\\I\r\n\r\n    Start Time: 1616727177\r\n    Timeout   : 7200 (sec)\r\n    Verify return code: 18 (self signed certificate)\r\n    Extended master secret: yes\r\n    ---\r\n250 SMTPUTF8\r\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003cbr\u003e\u003c/br\u003e\u003c/p\u003e\n\u003cp\u003e接著修改main.cf，停用TLSv1.1以下版本\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4\"\u003e\u003ccode class=\"language-:/etc/postfix/main.cf\" data-lang=\":/etc/postfix/main.cf\"\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e...\u003c/span\u003e\n\u003cspan style=\"color:#a6e22e\"\u003esmtpd_tls_mandatory_protocols\u003c/span\u003e \u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e!\u003c/span\u003e\u003cspan style=\"color:#a6e22e\"\u003eSSLv2\u003c/span\u003e, \u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e!\u003c/span\u003e\u003cspan style=\"color:#a6e22e\"\u003eSSLv3\u003c/span\u003e, \u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e!\u003c/span\u003e\u003cspan style=\"color:#a6e22e\"\u003eTLSv1\u003c/span\u003e, \u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e!\u003c/span\u003e\u003cspan style=\"color:#a6e22e\"\u003eTLSv1\u003c/span\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e\n\u003cspan style=\"color:#a6e22e\"\u003esmtpd_tls_protocols\u003c/span\u003e \u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e!\u003c/span\u003e\u003cspan style=\"color:#a6e22e\"\u003eSSLv2\u003c/span\u003e, \u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e!\u003c/span\u003e\u003cspan style=\"color:#a6e22e\"\u003eSSLv3\u003c/span\u003e, \u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e!\u003c/span\u003e\u003cspan style=\"color:#a6e22e\"\u003eTLSv1\u003c/span\u003e, \u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e!\u003c/span\u003e\u003cspan style=\"color:#a6e22e\"\u003eTLSv1\u003c/span\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003e\u003cbr\u003e\u003c/br\u003e\u003c/p\u003e\n\u003cp\u003e改完reload\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e# systemctl restart postfix\r\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003cbr\u003e\u003c/br\u003e\u003c/p\u003e\n\u003cp\u003e如果輸出變為以下狀態就是成功了\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e$ openssl s_client -connect localhost:25 -starttls smtp -tls1\r\n\r\n...\r\n\r\nSSL-Session:\r\n    Protocol  : TLSv1\r\n    Cipher    : 0000\r\n    Session-ID: \r\n    Session-ID-ctx: \r\n    Master-Key: \r\n    PSK identity: None\r\n    PSK identity hint: None\r\n    SRP username: None\r\n    Start Time: 1616728189\r\n    Timeout   : 7200 (sec)\r\n    Verify return code: 0 (ok)\r\n    Extended master secret: no\r\n---\r\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003cbr\u003e\u003c/br\u003e\u003c/p\u003e\n\u003ch2 id=\"postfix-anon\"\u003eSSL Anonymous Cipher Suites Supported\u003c/h2\u003e\r\n\u003cp\u003e\u003cbr\u003e\u003c/br\u003e\n這感覺要nmap才方便測，使用\u003ccode\u003enmap\u003c/code\u003e測試，會有一些anon的cipher\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e$ nmap -sV --script ssl-enum-ciphers -p 25 127.0.0.1\r\n\r\nStarting Nmap 7.60 ( https://nmap.org ) at 2021-03-30 08:44 UTC\r\nNmap scan report for localhost.localdomain (127.0.0.1)\r\nHost is up (0.000035s latency).\r\n\r\nPORT   STATE SERVICE VERSION\r\n25/tcp open  smtp    Postfix smtpd\r\n| ssl-enum-ciphers: \r\n|   TLSv1.2: \r\n|     ciphers: \r\n        ...\r\n|       TLS_DHE_RSA_WITH_CHACHA20_POLY1305_SHA256 (dh 2048) - A\r\n|       TLS_DHE_RSA_WITH_SEED_CBC_SHA (dh 2048) - A\r\n|       TLS_DH_anon_WITH_AES_128_CBC_SHA - F\r\n|       TLS_DH_anon_WITH_AES_128_CBC_SHA256 - F\r\n|       TLS_DH_anon_WITH_AES_128_GCM_SHA256 - F\r\n|       TLS_DH_anon_WITH_AES_256_CBC_SHA - F\r\n|       TLS_DH_anon_WITH_AES_256_CBC_SHA256 - F\r\n|       TLS_DH_anon_WITH_AES_256_GCM_SHA384 - F\r\n|       TLS_DH_anon_WITH_CAMELLIA_128_CBC_SHA - F\r\n|       TLS_DH_anon_WITH_CAMELLIA_128_CBC_SHA256 - F\r\n|       TLS_DH_anon_WITH_CAMELLIA_256_CBC_SHA - F\r\n|       TLS_DH_anon_WITH_CAMELLIA_256_CBC_SHA256 - F\r\n|       TLS_DH_anon_WITH_SEED_CBC_SHA - F\r\n        ...\r\n|       TLS_ECDHE_RSA_WITH_CAMELLIA_256_CBC_SHA384 (rsa 2048) - A\r\n|       TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305_SHA256 (rsa 2048) - A\r\n|       TLS_ECDH_anon_WITH_AES_128_CBC_SHA - F\r\n|       TLS_ECDH_anon_WITH_AES_256_CBC_SHA - F\r\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003cbr\u003e\u003c/br\u003e\u003c/p\u003e\n\u003cp\u003etls設定加上以下，再跑一次就清潔溜溜沒有anon了\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4\"\u003e\u003ccode class=\"language-:/etc/postfix/main.cf\" data-lang=\":/etc/postfix/main.cf\"\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e...\u003c/span\u003e\n\u003cspan style=\"color:#a6e22e\"\u003esmtpd_tls_ask_ccert\u003c/span\u003e \u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eyes\u003c/span\u003e\n\u003cspan style=\"color:#a6e22e\"\u003esmtpd_tls_security_level\u003c/span\u003e \u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003emay\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003e\u003cbr\u003e\u003c/br\u003e\u003c/p\u003e\n\u003ch2 id=\"nginx\"\u003eNginx\u003c/h2\u003e\r\n\u003chr\u003e\n\u003cp\u003e\u003cbr\u003e\u003c/br\u003e\u003c/p\u003e\n\u003cp\u003e常見的Http Server Nginx\u003c/p\u003e\n\u003ch3 id=\"nginx-tlsv1\"\u003eTLS Version 1.0 Protocol Detection\u003c/h3\u003e\r\n\u003cp\u003e\u003cbr\u003e\u003c/br\u003e\n用OpenSSL就能側了，允許TLSv1.0的話會是這樣輸出\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e$ openssl s_client -connect localhost:443 -tls1\r\n\r\n...\r\nNew, TLSv1.0, Cipher is ECDHE-RSA-AES256-SHA\r\nServer public key is 2048 bit\r\nSecure Renegotiation IS supported\r\nCompression: NONE\r\nExpansion: NONE\r\nNo ALPN negotiated\r\nSSL-Session:\r\n    Protocol  : TLSv1\r\n    Cipher    : ECDHE-RSA-AES256-SHA\r\n    Session-ID: 290A86BC98F3AC36E05041EA9D7C2DF50C92BB785C4171CC95DD1D3D1AFC5F4D\r\n    Session-ID-ctx: \r\n    Master-Key: 1747BDECB7A27E928E11F58A01E4C7116CF6C05B17D7310FA464E1F73B835ACBBDD473E9AF4EAB30375F00A81AF8022B\r\n    PSK identity: None\r\n    PSK identity hint: None\r\n    SRP username: None\r\n    TLS session ticket lifetime hint: 300 (seconds)\r\n    TLS session ticket:\r\n    0000 - 46 eb 1d 96 72 48 06 0e-d4 40 1b 7f 0b 10 eb fe   F...rH...@......\r\n    0010 - e0 ee 34 9d 5c 08 6f c6-45 ef ba 04 8b 88 75 6e   ..4.\\.o.E.....un\r\n    0020 - 66 0e b3 2c 88 ac 8f 9d-77 a2 31 12 fe 53 87 45   f..,....w.1..S.E\r\n    0030 - aa 31 50 be 45 04 94 83-8e 8a 8e 0b 5d 12 6a 10   .1P.E.......].j.\r\n    0040 - da 26 0d 9f a6 31 85 fe-af 2e 6d 69 a4 d5 78 21   .\u0026amp;...1....mi..x!\r\n    0050 - fb ff 6c c0 6f 63 b6 93-fc 0c 10 4f 5a 59 46 a7   ..l.oc.....OZYF.\r\n    0060 - c6 fd d8 ae 68 60 bb da-8c 64 f0 8d 15 00 99 8a   ....h`...d......\r\n    0070 - a0 a7 37 47 86 63 9a c3-d2 70 ec 93 ae 6c 10 57   ..7G.c...p...l.W\r\n    0080 - 2d 8b 52 c5 2f 3f bf 17-a2 cd 6c 24 46 3a 9b c6   -.R./?....l$F:..\r\n    0090 - 9e cd 6f 7d 2c a2 2a 63-a3 9b ba ef 2d 0f a6 69   ..o},.*c....-..i\r\n    00a0 - 82 f1 72 3c 3f cb 81 c3-15 c2 df 61 ad 38 ea df   ..r\u0026lt;?......a.8..\r\n\r\n    Start Time: 1617004882\r\n    Timeout   : 7200 (sec)\r\n    Verify return code: 18 (self signed certificate)\r\n    Extended master secret: yes\r\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003cbr\u003e\u003c/br\u003e\u003c/p\u003e\n\u003cp\u003e在\u003ccode\u003essl_protocols\u003c/code\u003e這裡拿掉不需要的\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-:/etc/nginx/sites-available/default\" data-lang=\":/etc/nginx/sites-available/default\"\u003eserver {\r\n        listen              443 ssl;\r\n        keepalive_timeout   70;\r\n\r\n        ssl_certificate     /etc/ssl/certs/ssl-cert-snakeoil.pem;\r\n        ssl_certificate_key /etc/ssl/private/ssl-cert-snakeoil.key;\r\n        ssl_protocols       TLSv1.2;\r\n        ssl_ciphers         HIGH:!aNULL:!MD5;\r\n\r\n}\r\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003cbr\u003e\u003c/br\u003e\u003c/p\u003e\n\u003cp\u003e改完reload\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e# systemctl restart nginx\r\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003cbr\u003e\u003c/br\u003e\u003c/p\u003e\n\u003cp\u003ereload後測試變這樣就OK了\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e$ openssl s_client -connect localhost:443 -tls1\r\n\r\n...\r\nNew, (NONE), Cipher is (NONE)\r\nSecure Renegotiation IS NOT supported\r\nCompression: NONE\r\nExpansion: NONE\r\nNo ALPN negotiated\r\nSSL-Session:\r\n    Protocol  : TLSv1\r\n    Cipher    : 0000\r\n    Session-ID: \r\n    Session-ID-ctx: \r\n    Master-Key: \r\n    PSK identity: None\r\n    PSK identity hint: None\r\n    SRP username: None\r\n    Start Time: 1617005037\r\n    Timeout   : 7200 (sec)\r\n    Verify return code: 0 (ok)\r\n    Extended master secret: no\r\n---\r\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003cbr\u003e\u003c/br\u003e\u003c/p\u003e",
    "kind": "page",
    "params": {
      "categories": [
        "Security"
      ],
      "date": "2021-03-23T10:08:55+08:00",
      "draft": false,
      "iscjklanguage": true,
      "lastmod": "2021-03-23T10:08:55+08:00",
      "publishdate": "2021-03-23T10:08:55+08:00",
      "tags": [
        "Apache",
        "Postfix",
        "Nginx"
      ],
      "title": "常見的Vulnerability測試與修正(陸續更新)"
    },
    "permalink": "https://mikanbearer.github.io/posts/2021/03/202103231008/index.json",
    "type": "posts",
    "wordcount": 1648
  }
}