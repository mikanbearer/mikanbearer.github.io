



    
        
    




{
  "result": {
    "content": "\u003cp\u003e心一橫把整個BLOG做成Single Page了，但目前還只是雛形，記錄下幾個主要的變更點、想法及待解決的問題\u003c/p\u003e\n\u003ch3 id=\"主要的變更\"\u003e主要的變更\u003c/h3\u003e\n\u003chr\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003erouter\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e加入了Vue Router，為了方便使用網址操作採用hash mode\n\u003cbr\u003e\u003c/br\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003epost\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e為減少Loading，所有Post的Page都使用Axios來取得，request的url來自hugo template內一開始包含的object，使用query來傳給route component\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003cbr\u003e\u003c/br\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003esearch\n\u003cul\u003e\n\u003cli\u003e幾乎沿用的搜尋功能，一樣使用hugo template內一開始包含的object，但改成了and的方式搜尋並無視大小寫分別，且能使用query的方式操作(參照前列router說的hash mode)\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003cimg src=\"1.gif\" width=\"500\"\u003e\r\n\u003cbr\u003e\u003c/br\u003e\r\n\u003cul\u003e\n\u003cli\u003edisqus\n\u003cul\u003e\n\u003cli\u003e保留了disqus，為了和其他非單頁式且使用hugo預設template的theme相容，一樣使用url而非identifier，為了避免過多request與head被無止盡的append script，改用DUSQUS.reset()，像是以下樣式\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4\"\u003e\u003ccode class=\"language-js\" data-lang=\"js\"\u003e\u003cspan style=\"color:#66d9ef\"\u003econst\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003ePost\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e {\n  ...\n\n  \u003cspan style=\"color:#a6e22e\"\u003emethods\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e:\u003c/span\u003e {\n    \u003cspan style=\"color:#a6e22e\"\u003eresetDisqus\u003c/span\u003e (\u003cspan style=\"color:#a6e22e\"\u003eurl\u003c/span\u003e) {\n      window.\u003cspan style=\"color:#a6e22e\"\u003eDISQUS\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003ereset\u003c/span\u003e({\n        \u003cspan style=\"color:#a6e22e\"\u003ereload\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e:\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003etrue\u003c/span\u003e,\n        \u003cspan style=\"color:#a6e22e\"\u003econfig\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e:\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003efunction\u003c/span\u003e () {\n          \u003cspan style=\"color:#66d9ef\"\u003ethis\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003epage\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eurl\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eurl\u003c/span\u003e\n          }\n        }\n      )\n    },\n  }\n}\n\n...\n\n\u003cspan style=\"color:#a6e22e\"\u003eVue\u003c/span\u003e({\n  ...\n\n  \u003cspan style=\"color:#a6e22e\"\u003emethods\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e:\u003c/span\u003e {\n    \u003cspan style=\"color:#a6e22e\"\u003eaddingDISQUS\u003c/span\u003e () {\n      (() =\u0026gt; {\n        \u003cspan style=\"color:#66d9ef\"\u003eif\u003c/span\u003e ([\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;localhost\u0026#34;\u003c/span\u003e, \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;127.0.0.1\u0026#34;\u003c/span\u003e].\u003cspan style=\"color:#a6e22e\"\u003eindexOf\u003c/span\u003e(window.\u003cspan style=\"color:#a6e22e\"\u003elocation\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003ehostname\u003c/span\u003e) \u003cspan style=\"color:#f92672\"\u003e!=\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e-\u003c/span\u003e\u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e) {\n          document.\u003cspan style=\"color:#a6e22e\"\u003egetElementById\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;disqus_thread\u0026#39;\u003c/span\u003e).\u003cspan style=\"color:#a6e22e\"\u003einnerHTML\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;Disqus comments not available by default when the website ispreviewed locally.\u0026#39;\u003c/span\u003e\n          \u003cspan style=\"color:#66d9ef\"\u003ereturn\u003c/span\u003e\n      }\n      \u003cspan style=\"color:#66d9ef\"\u003evar\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003ed\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e document, \u003cspan style=\"color:#a6e22e\"\u003es\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003ed\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003ecreateElement\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;script\u0026#39;\u003c/span\u003e)\n      \u003cspan style=\"color:#a6e22e\"\u003es\u003c/span\u003e.\u003cspan style=\"color:#66d9ef\"\u003easync\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003etrue\u003c/span\u003e\n      \u003cspan style=\"color:#66d9ef\"\u003evar\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003edisqus_shortname\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;{{ .Site.DisqusShortname }}\u0026#39;\u003c/span\u003e\n      \u003cspan style=\"color:#a6e22e\"\u003es\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003esrc\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;//\u0026#39;\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e+\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003edisqus_shortname\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e+\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;.disqus.com/embed.js\u0026#39;\u003c/span\u003e\n      \u003cspan style=\"color:#a6e22e\"\u003es\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003esetAttribute\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;data-timestamp\u0026#39;\u003c/span\u003e, \u003cspan style=\"color:#f92672\"\u003e+\u003c/span\u003e\u003cspan style=\"color:#66d9ef\"\u003enew\u003c/span\u003e Date())\n      \u003cspan style=\"color:#a6e22e\"\u003ed\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003ebody\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eappendChild\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003es\u003c/span\u003e)\n      })()\n    },\n  }\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003e\u003cbr\u003e\u003c/br\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e移除部分template\n\u003cul\u003e\n\u003cli\u003e使用query來替代posts的list template\u003c/li\u003e\n\u003cli\u003eterm的部分還在思考中\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003cbr\u003e\u003c/br\u003e\u003c/p\u003e\n\u003ch3 id=\"主要的問題\"\u003e主要的問題\u003c/h3\u003e\n\u003chr\u003e\n\u003cul\u003e\n\u003cli\u003eVuerify v-app-bar往上捲動無法正確觸發\n\u003cul\u003e\n\u003cli\u003e研究中，現在利用v-model及life cycle method處理，強制讓window.scrollY === 0的時候為true\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003cimg src=\"2.gif\" width=\"500\"\u003e\r\n\u003cbr\u003e\u003c/br\u003e\r\n\u003cul\u003e\n\u003cli\u003ev-html內相對路徑的圖片\n\u003cul\u003e\n\u003cli\u003e之前寫作風格留的鍋，以往圖片都是在貼文的路徑下，與之前在code block加入title一樣，暫時是用個script解決\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4\"\u003e\u003ccode class=\"language-js\" data-lang=\"js\"\u003e      \u003cspan style=\"color:#a6e22e\"\u003ereplaceImgSrc\u003c/span\u003e () {\n        \u003cspan style=\"color:#66d9ef\"\u003evar\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003econtents\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e document.\u003cspan style=\"color:#a6e22e\"\u003egetElementsByClassName\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;content\u0026#39;\u003c/span\u003e)\n\n        Array.\u003cspan style=\"color:#a6e22e\"\u003eprototype\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eforEach\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003ecall\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003econtents\u003c/span\u003e, \u003cspan style=\"color:#a6e22e\"\u003econtent\u003c/span\u003e =\u0026gt; {\n          \u003cspan style=\"color:#66d9ef\"\u003evar\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eimgs\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003econtent\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003egetElementsByTagName\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;img\u0026#39;\u003c/span\u003e)\n          Array.\u003cspan style=\"color:#a6e22e\"\u003eprototype\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eforEach\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003ecall\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003eimgs\u003c/span\u003e, \u003cspan style=\"color:#a6e22e\"\u003eimg\u003c/span\u003e =\u0026gt; {\n            \u003cspan style=\"color:#66d9ef\"\u003eif\u003c/span\u003e (\u003cspan style=\"color:#a6e22e\"\u003eimg\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eattributes\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003esrc\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003evalue\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eindexOf\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;http\u0026#39;\u003c/span\u003e) \u003cspan style=\"color:#f92672\"\u003e==\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e-\u003c/span\u003e\u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e) {\n              \u003cspan style=\"color:#a6e22e\"\u003eimg\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003esrc\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003ethis\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003epost\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eurl\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e+\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eimg\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eattributes\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003esrc\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003evalue\u003c/span\u003e\n            }\n          })\n        })        \n      },\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003e\u003cbr\u003e\u003c/br\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003ev-html內的script\n\u003cul\u003e\n\u003cli\u003e貼文插入codepen之類的問題，之前試過將script的element加到document內再次執行，但感覺不是很好，還是將插入的block改為iframe\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003cbr\u003e\u003c/br\u003e\n接下來就等看看升級成Vue3了\u003c/p\u003e",
    "kind": "page",
    "params": {
      "categories": [
        "未分類"
      ],
      "date": "2020-10-08T17:13:00+08:00",
      "draft": false,
      "iscjklanguage": true,
      "lastmod": "2020-10-08T17:13:00+08:00",
      "publishdate": "2020-10-08T17:13:00+08:00",
      "tags": [
        "Hugo",
        "Vue.js"
      ],
      "title": "主題更新"
    },
    "permalink": "https://mikanbearer.github.io/posts/202010081713/index.json",
    "type": "posts",
    "wordcount": 829
  }
}