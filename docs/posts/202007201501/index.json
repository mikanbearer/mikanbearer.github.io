



    
        
    




{
  "result": {
    "content": "\u003cp\u003e承之前的範例，這次要用JSON Web Token驗證，並加上Cross-Origin Resource Sharing\u003c/p\u003e\n\u003cp\u003ecode放在一樣放在GitHub上\n\u003ca href=\"https://github.com/mikanbearer/django_rest_example\"\u003e\u003ca href=\"https://github.com/mikanbearer/django_rest_example\"\u003ehttps://github.com/mikanbearer/django_rest_example\u003c/a\u003e\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003e環境大概是以下這樣\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e$ python --version\r\nPython 3.8.4\r\n$ pip list\r\n...\r\nDjango                  3.0\r\ndjango-cors-headers     3.2.1\r\ndjangorestframework     3.11.0\r\ndjangorestframework-jwt 1.11.0\r\n\r\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e修改settings.py\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cdiv style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4\"\u003e\n\u003ctable style=\"border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;\"\u003e\u003ctr\u003e\u003ctd style=\"vertical-align:top;padding:0;margin:0;border:0;\"\u003e\n\u003cpre style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4\"\u003e\u003ccode\u003e\u003cspan style=\"margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e33\n\u003c/span\u003e\u003cspan style=\"margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e34\n\u003c/span\u003e\u003cspan style=\"margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e35\n\u003c/span\u003e\u003cspan style=\"margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e36\n\u003c/span\u003e\u003cspan style=\"margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e37\n\u003c/span\u003e\u003cspan style=\"margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e38\n\u003c/span\u003e\u003cspan style=\"margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e39\n\u003c/span\u003e\u003cspan style=\"margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e40\n\u003c/span\u003e\u003cspan style=\"display:block;width:100%;background-color:#3c3d38\"\u003e\u003cspan style=\"margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e41\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e42\n\u003c/span\u003e\u003cspan style=\"margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e43\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/td\u003e\n\u003ctd style=\"vertical-align:top;padding:0;margin:0;border:0;;width:100%\"\u003e\n\u003cpre style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4\"\u003e\u003ccode class=\"language-:django_rest_example/settings.py\" data-lang=\":django_rest_example/settings.py\"\u003eINSTALLED_APPS \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e [\n    \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;django.contrib.admin\u0026#39;\u003c/span\u003e,\n    \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;django.contrib.auth\u0026#39;\u003c/span\u003e,\n    \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;django.contrib.contenttypes\u0026#39;\u003c/span\u003e,\n    \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;django.contrib.sessions\u0026#39;\u003c/span\u003e,\n    \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;django.contrib.messages\u0026#39;\u003c/span\u003e,\n    \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;django.contrib.staticfiles\u0026#39;\u003c/span\u003e,\n    \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;rest_framework\u0026#39;\u003c/span\u003e,\n\u003cspan style=\"display:block;width:100%;background-color:#3c3d38\"\u003e    \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;corsheaders\u0026#39;\u003c/span\u003e, \u003cspan style=\"color:#75715e\"\u003e# 追加\u003c/span\u003e\n\u003c/span\u003e    \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;api\u0026#39;\u003c/span\u003e,\n]\n\u003c/code\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/table\u003e\n\u003c/div\u003e\n\u003c/div\u003e\u003cp\u003eMiddleware\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cdiv style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4\"\u003e\n\u003ctable style=\"border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;\"\u003e\u003ctr\u003e\u003ctd style=\"vertical-align:top;padding:0;margin:0;border:0;\"\u003e\n\u003cpre style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4\"\u003e\u003ccode\u003e\u003cspan style=\"margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e45\n\u003c/span\u003e\u003cspan style=\"margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e46\n\u003c/span\u003e\u003cspan style=\"margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e47\n\u003c/span\u003e\u003cspan style=\"margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e48\n\u003c/span\u003e\u003cspan style=\"margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e49\n\u003c/span\u003e\u003cspan style=\"margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e50\n\u003c/span\u003e\u003cspan style=\"margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e51\n\u003c/span\u003e\u003cspan style=\"margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e52\n\u003c/span\u003e\u003cspan style=\"display:block;width:100%;background-color:#3c3d38\"\u003e\u003cspan style=\"margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e53\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e54\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/td\u003e\n\u003ctd style=\"vertical-align:top;padding:0;margin:0;border:0;;width:100%\"\u003e\n\u003cpre style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4\"\u003e\u003ccode class=\"language-:django_rest_example/settings.py\" data-lang=\":django_rest_example/settings.py\"\u003eMIDDLEWARE \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e [\n    \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;django.middleware.security.SecurityMiddleware\u0026#39;\u003c/span\u003e,\n    \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;django.contrib.sessions.middleware.SessionMiddleware\u0026#39;\u003c/span\u003e,\n    \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;django.middleware.common.CommonMiddleware\u0026#39;\u003c/span\u003e,\n    \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;django.middleware.csrf.CsrfViewMiddleware\u0026#39;\u003c/span\u003e,\n    \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;django.contrib.auth.middleware.AuthenticationMiddleware\u0026#39;\u003c/span\u003e,\n    \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;django.contrib.messages.middleware.MessageMiddleware\u0026#39;\u003c/span\u003e,\n    \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;django.middleware.clickjacking.XFrameOptionsMiddleware\u0026#39;\u003c/span\u003e,\n\u003cspan style=\"display:block;width:100%;background-color:#3c3d38\"\u003e    \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;corsheaders.middleware.CorsMiddleware\u0026#39;\u003c/span\u003e,\n\u003c/span\u003e]\n\u003c/code\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/table\u003e\n\u003c/div\u003e\n\u003c/div\u003e\u003cp\u003e白名單\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cdiv style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4\"\u003e\n\u003ctable style=\"border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;\"\u003e\u003ctr\u003e\u003ctd style=\"vertical-align:top;padding:0;margin:0;border:0;\"\u003e\n\u003cpre style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4\"\u003e\u003ccode\u003e\u003cspan style=\"display:block;width:100%;background-color:#3c3d38\"\u003e\u003cspan style=\"margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e133\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:block;width:100%;background-color:#3c3d38\"\u003e\u003cspan style=\"margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e134\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:block;width:100%;background-color:#3c3d38\"\u003e\u003cspan style=\"margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e135\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:block;width:100%;background-color:#3c3d38\"\u003e\u003cspan style=\"margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e136\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/td\u003e\n\u003ctd style=\"vertical-align:top;padding:0;margin:0;border:0;;width:100%\"\u003e\n\u003cpre style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4\"\u003e\u003ccode class=\"language-:django_rest_example/settings.py\" data-lang=\":django_rest_example/settings.py\"\u003e\u003cspan style=\"display:block;width:100%;background-color:#3c3d38\"\u003eCORS_ORIGIN_WHITELIST \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e [\n\u003c/span\u003e\u003cspan style=\"display:block;width:100%;background-color:#3c3d38\"\u003e    \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;http://localhost:8080\u0026#34;\u003c/span\u003e,\n\u003c/span\u003e\u003cspan style=\"display:block;width:100%;background-color:#3c3d38\"\u003e    \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;http://127.0.0.1:9000\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003cspan style=\"display:block;width:100%;background-color:#3c3d38\"\u003e]\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/table\u003e\n\u003c/div\u003e\n\u003c/div\u003e\u003cp\u003eJWT設定\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cdiv style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4\"\u003e\n\u003ctable style=\"border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;\"\u003e\u003ctr\u003e\u003ctd style=\"vertical-align:top;padding:0;margin:0;border:0;\"\u003e\n\u003cpre style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4\"\u003e\u003ccode\u003e\u003cspan style=\"margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e127\n\u003c/span\u003e\u003cspan style=\"margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e128\n\u003c/span\u003e\u003cspan style=\"margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e129\n\u003c/span\u003e\u003cspan style=\"display:block;width:100%;background-color:#3c3d38\"\u003e\u003cspan style=\"margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e130\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:block;width:100%;background-color:#3c3d38\"\u003e\u003cspan style=\"margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e131\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:block;width:100%;background-color:#3c3d38\"\u003e\u003cspan style=\"margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e132\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:block;width:100%;background-color:#3c3d38\"\u003e\u003cspan style=\"margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e133\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:block;width:100%;background-color:#3c3d38\"\u003e\u003cspan style=\"margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e134\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:block;width:100%;background-color:#3c3d38\"\u003e\u003cspan style=\"margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e135\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:block;width:100%;background-color:#3c3d38\"\u003e\u003cspan style=\"margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e136\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:block;width:100%;background-color:#3c3d38\"\u003e\u003cspan style=\"margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e137\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e138\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/td\u003e\n\u003ctd style=\"vertical-align:top;padding:0;margin:0;border:0;;width:100%\"\u003e\n\u003cpre style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4\"\u003e\u003ccode class=\"language-:django_rest_example/settings.py\" data-lang=\":django_rest_example/settings.py\"\u003eREST_FRAMEWORK \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e {\n    \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;DEFAULT_PAGINATION_CLASS\u0026#39;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;rest_framework.pagination.PageNumberPagination\u0026#39;\u003c/span\u003e,\n    \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;PAGE_SIZE\u0026#39;\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003e10\u003c/span\u003e,\n\u003cspan style=\"display:block;width:100%;background-color:#3c3d38\"\u003e    \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;DEFAULT_PERMISSION_CLASSES\u0026#39;\u003c/span\u003e: (\n\u003c/span\u003e\u003cspan style=\"display:block;width:100%;background-color:#3c3d38\"\u003e        \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;rest_framework.permissions.IsAuthenticated\u0026#39;\u003c/span\u003e,\n\u003c/span\u003e\u003cspan style=\"display:block;width:100%;background-color:#3c3d38\"\u003e    ),\n\u003c/span\u003e\u003cspan style=\"display:block;width:100%;background-color:#3c3d38\"\u003e    \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;DEFAULT_AUTHENTICATION_CLASSES\u0026#39;\u003c/span\u003e: (\n\u003c/span\u003e\u003cspan style=\"display:block;width:100%;background-color:#3c3d38\"\u003e        \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;rest_framework_jwt.authentication.JSONWebTokenAuthentication\u0026#39;\u003c/span\u003e,\n\u003c/span\u003e\u003cspan style=\"display:block;width:100%;background-color:#3c3d38\"\u003e        \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;rest_framework.authentication.SessionAuthentication\u0026#39;\u003c/span\u003e,\n\u003c/span\u003e\u003cspan style=\"display:block;width:100%;background-color:#3c3d38\"\u003e        \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;rest_framework.authentication.BasicAuthentication\u0026#39;\u003c/span\u003e,\n\u003c/span\u003e\u003cspan style=\"display:block;width:100%;background-color:#3c3d38\"\u003e    ),\n\u003c/span\u003e}\n\u003c/code\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/table\u003e\n\u003c/div\u003e\n\u003c/div\u003e\u003cp\u003e追加以下\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cdiv style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4\"\u003e\n\u003ctable style=\"border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;\"\u003e\u003ctr\u003e\u003ctd style=\"vertical-align:top;padding:0;margin:0;border:0;\"\u003e\n\u003cpre style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4\"\u003e\u003ccode\u003e\u003cspan style=\"margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e 1\n\u003c/span\u003e\u003cspan style=\"margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e 2\n\u003c/span\u003e\u003cspan style=\"display:block;width:100%;background-color:#3c3d38\"\u003e\u003cspan style=\"margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e 3\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e 4\n\u003c/span\u003e\u003cspan style=\"margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e 5\n\u003c/span\u003e\u003cspan style=\"margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e 6\n\u003c/span\u003e\u003cspan style=\"margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e 7\n\u003c/span\u003e\u003cspan style=\"margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e 8\n\u003c/span\u003e\u003cspan style=\"margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e 9\n\u003c/span\u003e\u003cspan style=\"margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e10\n\u003c/span\u003e\u003cspan style=\"margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e11\n\u003c/span\u003e\u003cspan style=\"display:block;width:100%;background-color:#3c3d38\"\u003e\u003cspan style=\"margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e12\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:block;width:100%;background-color:#3c3d38\"\u003e\u003cspan style=\"margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e13\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e14\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/td\u003e\n\u003ctd style=\"vertical-align:top;padding:0;margin:0;border:0;;width:100%\"\u003e\n\u003cpre style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4\"\u003e\u003ccode class=\"language-:api/urls.py\" data-lang=\":api/urls.py\"\u003e\u003cspan style=\"color:#f92672\"\u003efrom\u003c/span\u003e django.urls \u003cspan style=\"color:#f92672\"\u003eimport\u003c/span\u003e include, path\n\u003cspan style=\"color:#f92672\"\u003efrom\u003c/span\u003e rest_framework \u003cspan style=\"color:#f92672\"\u003eimport\u003c/span\u003e routers\n\u003cspan style=\"display:block;width:100%;background-color:#3c3d38\"\u003e\u003cspan style=\"color:#f92672\"\u003efrom\u003c/span\u003e rest_framework_jwt.views \u003cspan style=\"color:#f92672\"\u003eimport\u003c/span\u003e obtain_jwt_token, verify_jwt_token\n\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003efrom\u003c/span\u003e .views \u003cspan style=\"color:#f92672\"\u003eimport\u003c/span\u003e LinkmanViewSet\n\nrouter \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e routers\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003eDefaultRouter()\nrouter\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003eregister(\u003cspan style=\"color:#e6db74\"\u003er\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;linkman\u0026#39;\u003c/span\u003e, LinkmanViewSet)\n\nurlpatterns \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e [\n    path(\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;\u0026#39;\u003c/span\u003e, include(router\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003eurls)),\n    path(\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;api-auth/\u0026#39;\u003c/span\u003e, include(\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;rest_framework.urls\u0026#39;\u003c/span\u003e)),\n\u003cspan style=\"display:block;width:100%;background-color:#3c3d38\"\u003e    path(\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;api-token-auth/\u0026#39;\u003c/span\u003e, obtain_jwt_token),\n\u003c/span\u003e\u003cspan style=\"display:block;width:100%;background-color:#3c3d38\"\u003e    path(\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;api-token-verify/\u0026#39;\u003c/span\u003e, verify_jwt_token),\n\u003c/span\u003e]\n\u003c/code\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/table\u003e\n\u003c/div\u003e\n\u003c/div\u003e\u003cp\u003e使用JWT驗證\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e$ curl http://127.0.0.1:8000/api/\r\n{\u0026quot;detail\u0026quot;:\u0026quot;Authentication credentials were not provided.\u0026quot;}\r\n\r\n$ curl http://127.0.0.1:8000/api/api-token-auth/ -X POST -d \u0026quot;username=admin\u0026amp;password=123\u0026quot;\r\n{\u0026quot;token\u0026quot;:\u0026quot;eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJ1c2VyX2lkIjoxLCJ1c2VybmFtZSI6InphcSIsImV4cCI6MTU5NTIzMTA1MiwiZW1haWwiOiJxcUBxcS5xcSJ9.JeifIXkcpy7Koui1ezNMJDACJL1pyE_U0faaBBGeN8o\u0026quot;}\r\n\r\n$ curl http://127.0.0.1:8000/api/ -H \u0026quot;Authorization: JWT eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJ1c2VyX2lkIjoxLCJ1c2VybmFtZSI6InphcSIsImV4cCI6MTU5NTIzMTA1MiwiZW1haWwiOiJxcUBxcS5xcSJ9.JeifIXkcpy7Koui1ezNMJDACJL1pyE_U0faaBBGeN8o\u0026quot;\r\n{\u0026quot;linkman\u0026quot;:\u0026quot;http://127.0.0.1:8000/api/linkman/\u0026quot;}\r\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e測試CORS\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e$ curl http://127.0.0.1:8000/api/ \r\n    \\-I -X OPTIONS \r\n    \\-H \u0026quot;Origin: http://127.0.0.1:8000\u0026quot; \r\n    \\-H \u0026quot;Access-Control-Request-Method: GET\u0026quot;\r\nHTTP/1.1 200 OK\r\nDate: Mon, 20 Jul 2020 08:53:16 GMT\r\nServer: WSGIServer/0.2 CPython/3.6.8\r\nContent-Type: text/html; charset=utf-8\r\nContent-Length: 0\r\nVary: Origin\r\nX-Frame-Options: DENY\r\nX-Content-Type-Options: nosniff\r\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eOrigin和白名單一致會出現allow的資訊\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-{hl_lines=[\"11-13\"]}\" data-lang=\"{hl_lines=[\"11-13\"]}\"\u003e$ curl http://127.0.0.1:8000/api/ \r\n    \\-I -X OPTIONS \r\n    \\-H \u0026quot;Origin: http://127.0.0.1:9000\u0026quot; \r\n    \\-H \u0026quot;Access-Control-Request-Method: GET\u0026quot;\r\nHTTP/1.1 200 OK\r\nDate: Mon, 20 Jul 2020 08:53:23 GMT\r\nServer: WSGIServer/0.2 CPython/3.6.8\r\nContent-Type: text/html; charset=utf-8\r\nContent-Length: 0\r\nVary: Origin\r\nAccess-Control-Allow-Origin: http://127.0.0.1:9000\r\nAccess-Control-Allow-Headers: accept, accept-encoding, authorization, content-type, dnt, origin, user-agent, x-csrftoken, x-requested-with\r\nAccess-Control-Allow-Methods: DELETE, GET, OPTIONS, PATCH, POST, PUT\r\nAccess-Control-Max-Age: 86400\r\nX-Frame-Options: DENY\r\nX-Content-Type-Options: nosniff\r\n\u003c/code\u003e\u003c/pre\u003e",
    "kind": "page",
    "params": {
      "categories": [
        "WebDevelopment"
      ],
      "date": "2020-07-20T15:01:14+08:00",
      "draft": false,
      "iscjklanguage": true,
      "lastmod": "2020-07-20T15:01:14+08:00",
      "publishdate": "2020-07-20T15:01:14+08:00",
      "tags": [
        "Django",
        "Python"
      ],
      "title": "【Django API實作-入門篇2】在Django REST framework上導入JWT驗證"
    },
    "permalink": "https://mikanbearer.github.io/posts/202007201501/index.json",
    "type": "posts",
    "wordcount": 402
  }
}